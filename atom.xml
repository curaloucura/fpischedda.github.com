<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Minasss Projects Dump Blog]]></title>
  <link href="http://html5dev.altervista.org//atom.xml" rel="self"/>
  <link href="http://html5dev.altervista.org//"/>
  <updated>2013-03-21T15:34:48+01:00</updated>
  <id>http://html5dev.altervista.org//</id>
  <author>
    <name><![CDATA[Francesco Pischedda]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Real time web applications with ajax: long poll + message broker = 10k concurrent connections made easy]]></title>
    <link href="http://html5dev.altervista.org//posts/2013/03/03/real-time-web-applications-with-ajax-long-poll-plus-message-broker-equals-10k-concurrent-connections-made-easy/"/>
    <updated>2013-03-03T00:28:00+01:00</updated>
    <id>http://html5dev.altervista.org//posts/2013/03/03/real-time-web-applications-with-ajax-long-poll-plus-message-broker-equals-10k-concurrent-connections-made-easy</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Exploring distributed calculation with RabbitMQ]]></title>
    <link href="http://html5dev.altervista.org//posts/2013/02/28/exploring-distributed-calculation-with-rabbitmq/"/>
    <updated>2013-02-28T19:22:00+01:00</updated>
    <id>http://html5dev.altervista.org//posts/2013/02/28/exploring-distributed-calculation-with-rabbitmq</id>
    <content type="html"><![CDATA[<h1>Preface</h1>

<p>Lately I&#8217;ve had to work on a complex web application which have started to have
an increased (and increasing) number of users. Unfortunately this web
application was not built to scale easily and so problems started to get to the
surface.
When the user base was small to medium the load on the application server
was fairly low and we could focus on adding new features and growing our
user base until we landed on the Facebook platform. At some point users started
to came and the scheduled task took 10-20-40-70-90 minutues to complete leaving
the users to stare at the &#8220;calculating tasks&#8221; page.</p>

<p>The first approved solution was to migrate our servers to AWS so we could
increase host perfomance using bigger and bigger servers until we reached the
limits of the single machines again.</p>

<p>After a lot of battling with the management we had the opportunity to detach
the application core from the web site and started to build the new
architecture with these loosely defined requirements:</p>

<ul>
<li>better use of resources</li>
<li>better code organization and quality</li>
<li>horizontal scaling</li>
<li>manageabilty</li>
<li>ready for future development</li>
</ul>


<p>I admit that those where my requirements, but the management undestood that
they have lost the ability to understand the architecture beyhond a simple web
site with a bounch of scheduled routines that, honestly, worked with the help
of an infinite dose of luck&#8230;and also my prototype run in a fraction of time.</p>

<h1>Building blocks</h1>

<p>Our old backend has been broken in to those pieces:</p>

<ul>
<li>libcore : the base code extracted from the old and stinky web site</li>
<li><a href="http://www.rabbitmq.com">RabbitMQ</a> message broker</li>
<li>job scheduler : send messages to appropriate exchanges at appropriate time</li>
<li>workers : consume messages sent by the scheduler</li>
</ul>


<p>Leaving libcore apart doing its stuff lets focus on the scheduler and the
workers; for details about RabbitMQ please refer to its <a href="http://www.rabbitmq.com">web site</a>.</p>

<p>As a scheduling library I have choosen the open source
<a href="http://quartznet.sourceforge.net/">Quartz.NET</a> which provided a simple but
powerful interface to schedule jobs, I especially liked the ability to specify job
triggers with the well known and compact cron syntax. Long story short the
scheduled jobs harvests the tasks and send messages to exchanges accordingly.
I think that the whole core plus the jobs are not bigger than some hundreds of
lines of code. Wonderful!</p>

<p>The workers simply have to inherit from a BaseConsumer class and override the
consume method to do its tasks when a message is received. Done. Cool :)</p>

<p>Given this simple architecture what are the benefits? Lets see:</p>

<ul>
<li>scaling: I simply have to add more workers in the same or different machines
and the calculating power will increase accordingly</li>
<li>flexibility: if a new task is required I have to create a new scheduled job
and its consumer and maybe a new message type (messages are simple JSON
described objects); after all is tested I have to update the scheduler and add a
new worker either by updating a running worker or adding a new one without
affecting the whole system; yes it can be done while the system is crunching
its task and yes, obviously without affecting the web site(s)</li>
<li>cost effective: if we have a lot of task to complete at a certain hour in the
day I could simply turn on a couple of more machines when I need it and turn
those off when the whole work is completed; if you have ever used the Amazon
AWS infrastructure you understand of much one can save using this approach</li>
<li>testing: having everything well separated I can test each block individually
instead of having a code blob that is barely manageable</li>
</ul>


<p>With this short post I hope to increase interest in this simple way of doing
distribuited computing using a message broker (whatever its is) and a simple
but well architected system.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Trying TDD (Test Driven Development)]]></title>
    <link href="http://html5dev.altervista.org//posts/2013/02/03/trying-tdd/"/>
    <updated>2013-02-03T16:44:00+01:00</updated>
    <id>http://html5dev.altervista.org//posts/2013/02/03/trying-tdd</id>
    <content type="html"><![CDATA[<p>In every software development studio where I&#8217;ve been employed I&#8217;ve tryed to
add something to the development pipeline not only because I love the work I do
but more often than desired these companies lacked something (they all would
have scored a -12 on <a href="http://www.joelonsoftware.com/articles/fog0000000043.html">Joel Spolsky check
list</a>).</p>

<p>Some times I&#8217;ve had a plain victory some other times I&#8217;ve had to fight to even
get the company to listen me. Obviously that was their fault&#8230;in my head!
Surely I have done something wrong when I was trying to open their minds.
There was a time when a particular client asked explicitly for the use of the
MVC development pattern where internally the accepted solution was the
copy-paste-pray approach. That same company have never growed because of this
senseless approach to development but I didn&#8217;t care, I&#8217;ve moved along and my
life gained a lot of quality points.
In a next gig everything started smoother but I missed something and for
example I was not able to convince them to use git, them an external contractor
pretended the use of git on <a href="https://github.com/">github</a> and so git it was.</p>

<p>I want to make a clear point, I don&#8217;t usually say &#8220;you have to use that
tool/framework/service&#8221; because I want that and only that but because I think
that it is the right tool for the job! And this fact drives me crazy because it
seems that some people are unable to understand what&#8217;s best fer their own good!</p>

<p>Oooook let&#8217;s put the rant apart&#8230;what was the post title again? Oh yeah, TDD!
Well TDD fits perfectly in the pool of the &#8220;ignored suggestions&#8221; but this time
it&#8217;s different because, even in my personal projects, I&#8217;ve never used this
methodology seriously. So I&#8217;ve decided to add tests to my preferred pet project
and I am VERY VERY satisfied! Maybe this time I&#8217;ll have arguments on my side
when I&#8217;ll try to suggest TDD to someone.</p>

<h2>Why have I adopted TDD?</h2>

<p>Well, I&#8217;m developing <a href="https://github.com/fpischedda/lsystem">this little
creature</a> that for a certain period of
time were not receiving my attention, but fortunately I said to myself &#8220;what
the hell I don&#8217;t even know what part of this thing works&#8221; so I started to add
tests. I started to look at the code, there was something that had to be
changed, something that had to be deleted and so on so I&#8217;ve started to pick one
module at a time, reimagine the API and write tests or fix the code and write
tests to document the API usage.</p>

<p>Now that I&#8217;m doing a couple of commits a day, changing how things works,
refactoring code etc etc I feel that my code is always in a stable state even if
I don&#8217;t touch an old module for a week, I simply run the tests and see if/what
something is broken and where is broken. Even for small projects like mine you
can gain benefits imagine when building complex or big systems!</p>

<h2>Benefits</h2>

<p>I&#8217;ll try to list some of the benefits of this methodology:</p>

<ul>
<li>the code you write for the tests can be used as reference</li>
<li>you know in what state your project is, what works and what don&#8217;t</li>
<li>you know exactly where you code is broken</li>
<li>you feel better when it is needed to do a major change to the code base</li>
<li>if you are outsourcing some part of your project you can have an immediate
taste of the quality of the code produced</li>
</ul>


<p>There are obviously other benefits but those are what that I&#8217;ve detected during
my little experiment</p>

<h2>Cons</h2>

<ul>
<li>you have to produce more code, but it&#8217;s a well payed effort</li>
<li>you tell explicitly that you don&#8217;t trust your code :)</li>
<li>you&#8217;ll find people that trust any code from anywhere that will lought in
front of you&#8230;but then this people will spend nights fixing the system
instead of caring about their loved ones :)</li>
</ul>


<h2>What to use</h2>

<p>What to use as a base for your testing environment it&#8217;s up to you, your
development platform, the language, the test framework etc&#8230;
Personally I&#8217;m developing my project with python (>= 2.7.3) and I&#8217;m using
<a href="http://pypi.python.org/pypi/nose/">nosetests</a>, no needs to inherit classes,
just write functions with &#8220;test&#8221; in their names and they will be detected by
the framework.</p>

<h2>Conclusions</h2>

<p>TDD is a tool that will help you write better code, once you want to test some
piece of code it make you think how you can separate it in modules to help you
write tests and you will get a more modular and trustworty code base. The nice
thing is that anyone have to trust this words, just try it and see, it&#8217;s worth
it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim: My new portable IDE]]></title>
    <link href="http://html5dev.altervista.org//posts/2013/01/08/my-new-portable-ide/"/>
    <updated>2013-01-08T17:44:00+01:00</updated>
    <id>http://html5dev.altervista.org//posts/2013/01/08/my-new-portable-ide</id>
    <content type="html"><![CDATA[<h2>Why</h2>

<p>In the last six months I&#8217;ve felt the need to explore the command line ecosystem
of development tools and I&#8217;ve inevitably started to learn (ehm, again)
<a href="http://www.gnu.org/software/emacs/">Emacs</a> and then <a href="http://www.vim.org">Vim</a>,
the latter have won the battle. I liked Emacs but I ended up using Vim, I think
it&#8217;s just a matter of taste and I really don&#8217;t understand those famouse flame
wars between the two user groups :)</p>

<!-- more -->


<p>After I&#8217;ve found my editor of choice I&#8217;ve had to start filling it with the best
plugins for my development needs and thanks to this
<a href="https://www.youtube.com/watch?v=YhqsjUUHj6g">video</a>
now I have a very powerfull IDE that takes up little resources, is easily
extendable with tons of plugins and you can really write at speed of thought!</p>

<p>To get in the Vim philosofy doesn&#8217;t take too much time, just start to hack some
of your code, learn what keys you need to get that specific feature
(autocompletition for example) and repeat until you feel confortable, I think
that in a week or two one can became a Vim power user.</p>

<p>In the title I&#8217;ve used the word &#8220;portable&#8221;, why? And why is so important to me?
Well, I think Vim is available for near every OS out there and that&#8217;s a good
thing by itself but adding the fact that you can have an exact replica of your
preferred plugins and settings by simply copying around your .vim directory is,
in my opinion, awesome! For example last week I&#8217;ve had the need to use Vim on a
remote machine, at its first start it was the plain old Vim (Ubuntu 11.10
stock version) but after an scp I felt like it was my local development
machine.</p>

<p>There is a lot to learn to become a Vim guru but fortunately there are lot of
free resources out there to get you familiar with Vim, let me point out some:</p>

<ul>
<li>vim tutor: built in with vim, very useful tutorial to get started</li>
<li>vim :help command</li>
<li>this video <a href="https://www.youtube.com/watch?v=YhqsjUUHj6g">tutorial</a> on how to build
vim from scratch with python support, also has some nice keybindings and Vim
tips</li>
<li><a href="http://vimcasts.org/">VimCasts</a>, a lot of useful material about Vim</li>
<li>Google about Vim :)</li>
</ul>


<p>Even if not free (but very affordable) I strongly suggest the book
<a href="http://pragprog.com/book/dnvim/practical-vim">Pratical Vim</a> by Drew Neil,
the same author of the VimCasts web site.</p>

<h2>Closing Considerations</h2>

<p>Probably someone new to this topic will ask &#8220;why have I to learn a new set of
key bindings or use the terminal with my new shiny and powerful computer
when there are tons of good graphical IDEs with lots of buttons and menus?&#8221;</p>

<p>My very personal answer is that when you learn all this new stuff you will
probably be more and more productive or at least that&#8217;s what happened to me.
Again, it&#8217;s a matter of taste, but it won&#8217;t kill you if you give it a try,
trust me :)</p>

<p>I know that I&#8217;m far away from the status of Vim guru but learning is a fun
process and while I&#8217;m doing it I&#8217;m also producing useful code so there is no
waste here.</p>

<p>Talking about learning I&#8217;m going to read this nice
<a href="http://blog.sanctum.geek.nz/advanced-vim-registers/">article</a> about Vim&#8217;s
registers :)</p>

<h2>Footnotes</h2>

<p>This post has been written using Vim + <a href="https://github.com/hallison/vim-markdown">vim-markdown</a>
plugin in a <a href="http://tmux.sourceforge.net/">tmux</a> session running Vim in one pane
and <a href="http://octopress.org/">octopress</a> in the other.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[test book category]]></title>
    <link href="http://html5dev.altervista.org//posts/2012/09/05/test-book-category/"/>
    <updated>2012-09-05T13:21:00+02:00</updated>
    <id>http://html5dev.altervista.org//posts/2012/09/05/test-book-category</id>
    <content type="html"><![CDATA[<h1>this is a test post</h1>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Introducing Progress]]></title>
    <link href="http://html5dev.altervista.org//posts/2012/09/03/introducing-progress/"/>
    <updated>2012-09-03T16:15:00+02:00</updated>
    <id>http://html5dev.altervista.org//posts/2012/09/03/introducing-progress</id>
    <content type="html"><![CDATA[<h2><a href="http://html5dev.altervista.org/progress/" title="Progress app">Progress</a>, an activity tracking tool</h2>

<p>Lately I’ve been playing with a bounch of tools/frameworks/libraries to work
with the M-V-whatever design pattern for the javascript world plus I was evaluating
tools/platforms like <a href="http://trigger.io" title="Trigger.io product page">trigger.io</a> and <a href="http://phonegap.com" title="PhoneGap project page">PhoneGap</a>
to easily create a mobile application with said M-V things.</p>

<p>The winner framework has been <a href="http://angularj.org" title="AngularJS project page">AngularJS</a>
so I’ve started to build a little tracking tool called <a href="http://html5dev.altervista.org/progress/index.html" title="Progress app">Progress</a>.
The main goal is to give to the user a tool to quickly track activities and then review
the progresses made to a given project.</p>

<p>At first I wanted to host the user data on users’ browser WebStorage or  <a href="http://www.w3schools.com/html5/html5_webstorage.asp" title="W3CSchools take on WebStorage">“localStorage”</a>, share her/his
experience with other users and eventually store her/his whole data on a server
(I’m thinking that this should be a paid service just to help with hosting costs).</p>

<p>At this stage the user can create projects and track activity on them.
The next thing I’d like to add is the ability to review a project’s activity
using a simple graph and share this graph in some social network.</p>
]]></content>
  </entry>
  
</feed>
